# RAGDiaryPlugin 配置文件

# -------------------------------------------------------------------
# [缓存配置]
# -------------------------------------------------------------------

# RAG_PARSE_DEPTH: 解析深度上限
# 当使用本插件的语法将内容解析出来后，再继续对解析出来后的内容继续解析，直到到达深度上限。
# 默认为 1 (不递归)。设为 2 则解析一次后再解析一次。
RAG_PARSE_DEPTH=2

# RAG_QUERY_CACHE_ENABLED: 是否启用查询结果缓存 (true/false)
# 启用后，相同的查询（用户输入+AI回复+日记本名+修饰符）将直接返回缓存结果，不再调用向量数据库。
RAG_QUERY_CACHE_ENABLED=true

# RAG_CACHE_MAX_SIZE: 查询结果缓存的最大条目数 (LRU策略)
RAG_CACHE_MAX_SIZE=200

# RAG_CACHE_TTL_MS: 查询结果缓存的有效期（毫秒）
# 默认: 3600000 (1小时)
RAG_CACHE_TTL_MS=3600000

# EMBEDDING_CACHE_MAX_SIZE: 向量缓存的最大条目数
# 缓存 "文本 -> 向量" 的映射，减少 Embedding API 调用。
EMBEDDING_CACHE_MAX_SIZE=500

# EMBEDDING_CACHE_TTL_MS: 向量缓存的有效期（毫秒）
# 默认: 7200000 (2小时)
EMBEDDING_CACHE_TTL_MS=7200000

# AIMEMO_CACHE_MAX_SIZE: AIMemo 缓存的最大条目数
AIMEMO_CACHE_MAX_SIZE=50

# AIMEMO_CACHE_TTL_MS: AIMemo 缓存的有效期（毫秒）
# 默认: 1800000 (30分钟)
AIMEMO_CACHE_TTL_MS=1800000

# -------------------------------------------------------------------
# [Rerank 配置] (可选)
# -------------------------------------------------------------------
# 如果配置了 Rerank，插件将在向量检索后使用 Rerank 模型对结果进行重排序，以提高准确性。
# 只有在使用 ::Rerank 修饰符时才会触发。

# RerankUrl: Rerank API 的完整 URL (例如: https://api.siliconflow.cn/v1/rerank)
RerankUrl=

# RerankApi: Rerank API Key
RerankApi=

# RerankModel: Rerank 模型名称 (例如: BAAI/bge-reranker-v2-m3)
RerankModel=

# RerankMultiplier: 初筛倍率
# 在进行 Rerank 之前，先检索 k * multiplier 条记录，然后再重排序取前 k 条。
# 默认: 2.0
RerankMultiplier=2.0

# RerankMaxTokensPerBatch: Rerank API 单次请求的最大 Token 数限制
# 用于防止请求超长。插件会自动对文档进行分批处理。
# 默认: 16000
RerankMaxTokensPerBatch=16000

